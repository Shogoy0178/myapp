<h1>映画一覧</h1>

<!-- 映画検索フォーム -->
<div class="movie-search-container">
  <%= form_tag(movies_path, method: :get, class: "movie-search-form") do %>
    <%= search_field_tag :looking_for, nil, placeholder: 'キーワードを入力', class: "movie-search-input" %>
    <%= submit_tag '検索', class: "movie-search-button" %>
  <% end %>
</div>

<!-- 映画選択フォーム -->
<%= form_with url: save_selected_movies_path, method: :post, class: "movies-selection-form" do %>
  <div class="movies-container">
    <% if @movies.any? %>
      <% @movies.each do |movie| %>
        <div class="movie-card">
          <p class="movie-title"><%= movie['title'] %></p>

          <%= link_to movie_path(movie['id']), class: "movie-link" do %>
            <% if movie['poster_path'] %>
              <%= image_tag 'https://image.tmdb.org/t/p/w200' + movie['poster_path'], class: "movie-poster" %>
            <% else %>
              <p class="no-poster">No Poster Available</p>
            <% end %>
          <% end %>

          <!-- 映画選択ラジオボタン -->
          <div class="movie-radio">
            <%= radio_button_tag "movie_id", movie['id'], false, id: "movie-#{movie['id']}" %>
          </div>
        </div>
      <% end %>
    <% else %>
      <p class="no-movies-message">No movies found. Please try another search term.</p>
    <% end %>
  </div>

  <!-- 選択ボタン -->
  <% if @movies.any? %>
    <div class="decision-button-container">
      <%= submit_tag "決定", class: "btn btn-success decision-button" %>
    </div>
  <% end %>
<% end %>
